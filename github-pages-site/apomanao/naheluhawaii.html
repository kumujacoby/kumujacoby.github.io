<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="HandheldFriendly" content="true">
    <title>NƒÅ Helu Hawai ªi</title>
    <style>
        /* Base Variables - Using Kamehameha Colors */
        :root {
            --navy: #1E3057;
            --royal-blue: #5480E8;
            --white: #FFFFFF;
            --light-gray: #F0F0F0;
            --dark-teal: #3A5350;
            --teal: #40816E;
            --brown: #906841;
            --gold: #C79756;
            --rust: #A64331;
            --terra-cotta: #C64F3A;
            --burgundy: #5C1A2D;
            --rose: #833043;
            
            /* Swiss Design Grid Units */
            --grid-base: 8px;
            --grid-2x: 16px;
            --grid-3x: 24px;
            --grid-4x: 32px;
            --grid-5x: 40px;
            --grid-6x: 48px;
            --grid-8x: 64px;
            --grid-10x: 80px;
            --grid-12x: 96px;
            
            /* Typography Scale */
            --text-xs: 14px;
            --text-sm: 16px;
            --text-md: 20px;
            --text-lg: 24px;
            --text-xl: 32px;
            --text-2xl: 42px;
            --text-3xl: 56px;
            --text-4xl: 72px;
            
            /* Line Heights */
            --leading-tight: 1.1;
            --leading-normal: 1.3;
            --leading-relaxed: 1.5;
        }
        
        /* Reset & Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }
        
        html, body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            font-size: var(--text-sm);
            line-height: var(--leading-normal);
            color: var(--navy);
            background-color: var(--navy);
            overflow-x: hidden;
            height: 100%;
            width: 100%;
        }
        
        /* Layout Container with 8px Grid */
        .container {
            max-width: 1024px;
            margin: var(--grid-3x) auto;
            padding: 0 var(--grid-2x);
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - var(--grid-6x));
        }
        
        .main-container {
            width: 100%;
            background-color: var(--white);
            border-radius: var(--grid-3x);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
        }
        
        /* Header */
        .header {
            background-color: var(--rust);
            color: var(--white);
            padding: 0;
            text-align: center;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 100;
            height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        .header h1 {
            font-family: 'Helvetica Neue', sans-serif;
            font-size: 36px;
            letter-spacing: -0.02em;
            margin: 0;
            line-height: 1.1;
        }
        
        .nav-arrow {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            color: var(--white);
            text-decoration: none;
            display: flex;
            align-items: center;
            padding: 0 24px;
            transition: background-color 0.2s;
            border-right: 1px solid white;
            font-size: 24px;
            font-weight: bold;
        }
        
        .nav-arrow:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Content area */
        .content {
            padding: var(--grid-4x);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        /* Output section with display */
        .output-section {
            margin-bottom: var(--grid-4x);
        }
        
        .number-display {
            font-family: 'Futura', sans-serif;
            background-color: var(--light-gray);
            border: 2px solid #ddd;
            border-radius: var(--grid-base);
            padding: var(--grid-4x) var(--grid-2x);
            min-height: 200px; /* Set a fixed minimum height */
            margin-bottom: var(--grid-3x);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s;
            position: relative;
        }
        
        .number-display:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 15px rgba(84, 128, 232, 0.5);
            background-color: #f0f0f0;
            border-color: var(--royal-blue);
        }
        
        .arabic-number {
            font-size: var(--text-2xl);
            margin-bottom: var(--grid-base);
        }
        
        .hawaiian-number {
            font-size: var(--text-xl);
            color: var(--navy);
            max-width: 100%;
            line-height: 1.2;
            text-align: center;
            word-wrap: break-word;
            min-height: 80px; /* Set a fixed minimum height for the Hawaiian text container */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Control Buttons */
.controls {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--grid-2x);
    margin-bottom: var(--grid-3x);
}
        
        .control-btn {
            padding: var(--grid-2x);
            border: none;
            border-radius: var(--grid-base);
            cursor: pointer;
            font-size: var(--text-sm);
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease, transform 0.2s;
        }
        
        .control-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .control-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* Systematic color application */
        #clear-btn { background-color: var(--rose); color: var(--white); }
        #clear-btn:hover { background-color: var(--burgundy); }
        
        #backspace-btn { background-color: var(--terra-cotta); color: var(--white); }
        #backspace-btn:hover { background-color: var(--rust); }
        
        #show-hide-btn { background-color: var(--gold); color: var(--white); }
        #show-hide-btn:hover { background-color: var(--brown); }
        
        #random-btn { background-color: var(--teal); color: var(--white); }
        #random-btn:hover { background-color: var(--dark-teal); }
        
        .button-emoji {
            font-size: var(--text-md);
            margin-right: var(--grid-base);
        }
        
        /* Number input pad */
        .input-section {
            margin-bottom: var(--grid-4x);
        }
        
        .input-row {
            display: flex;
            margin-bottom: var(--grid-base);
            gap: var(--grid-base);
        }
        
        .digit-btn {
            flex: 1;
            height: 54px;
            border: none;
            border-radius: var(--grid-base);
            background-color: var(--royal-blue);
            color: var(--white);
            font-size: var(--text-lg);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .digit-btn:hover {
            transform: scale(1.02);
            background-color: var(--navy);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        .digit-btn:active {
            transform: scale(0.95);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            transition: all 0.1s;
        }
        
        /* Level indicator */
        .level-info {
            margin-top: var(--grid-base);
            font-size: var(--text-xs);
            color: #666;
            text-align: center;
        }
        
        /* Responsive adaptations */
        @media (max-width: 768px) {
            .container {
                padding: 0 var(--grid-base);
                margin: var(--grid-base) auto;
            }
            
            .content {
                padding: var(--grid-2x);
            }
            
            .header h1 {
                font-size: var(--text-xl);
            }
            
            .number-display {
                    min-height: 160px; /* Smaller fixed height on mobile */
                }
                
            .hawaiian-number {
                font-size: var(--text-md);
            }
            
            .arabic-number {
                font-size: var(--text-xl);
            }
            
            .controls {
                gap: var(--grid-base);
            }
            
            .control-btn {
                padding: var(--grid-base);
            }
            
            .button-text {
                display: none; /* Hide text on mobile */
            }
            
            .button-emoji {
                margin-right: 0; /* Adjust when text is hidden */
                font-size: var(--text-lg);
            }
            
            .digit-btn {
                height: 45px;
                font-size: var(--text-md);
            }
        }
        
        @media (max-width: 480px) {
            .container {
                margin: var(--grid-base) var(--grid-base);
            }
            
            .main-container {
                border-radius: var(--grid-2x);
            }
            
            .digit-btn {
                height: 40px;
                font-size: var(--text-sm);
            }
        }
        .level-selector {
    display: flex;
    align-items: center;
    grid-column: span 1;
}

.level-btn {
    width: 28px;
    height: 28px;
    border: none;
    border-radius: var(--grid-base);
    background-color: var(--dark-teal);
    color: var(--white);
    font-size: 18px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s;
    margin: 0 4px;
    padding: 0; /* Remove padding */
    line-height: 1; /* Set line height to 1 for better centering */
}

.level-btn span {
    margin: 0; /* Remove any margin */
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}

.level-btn:hover {
    background-color: var(--teal);
    transform: scale(1.1);
}

.level-btn:active {
    transform: scale(0.95);
}

#random-btn {
    flex: 1;
    margin: 0 4px;
}

#level-indicator {
    display: inline-block;
    background-color: var(--dark-teal);
    border-radius: 50%;
    width: 20px;
    height: 20px;
    line-height: 20px;
    text-align: center;
    margin-left: 4px;
    font-size: 14px;
}

/* For mobile screens */
@media (max-width: 768px) {
    .level-btn {
        width: 24px;
        height: 24px;
        font-size: 16px;
    }
    
    #level-indicator {
        width: 18px;
        height: 18px;
        line-height: 18px;
        font-size: 12px;
    }
}
        
    </style>
</head>
<body>
    <div class="container">
        <div class="main-container">
            <div class="header">
                <a href="index.html" class="nav-arrow" aria-label="Return to main menu">
                    ‚Üê
                </a>
                <h1>NƒÅ Helu Hawai ªi</h1>
            </div>
            
            <div class="content">
                <!-- Output Display -->
                <div class="output-section">
                    <div class="number-display" id="number-display" role="region" aria-label="helu display">
                        <span id="arabic-number" class="arabic-number">0</span>
                        <span id="hawaiian-number" class="hawaiian-number"> ªole</span>
                    </div>
                    <div class="controls">
                        <button id="clear-btn" class="control-btn">
                            <span class="button-emoji">üóëÔ∏è</span>
                            <span class="button-text">Kƒ™LOI</span>
                        </button>
                        <button id="backspace-btn" class="control-btn">
                            <span class="button-emoji">‚¨ÖÔ∏è</span>
                            <span class="button-text">HOLOI I HOPE</span>
                        </button>
                        <button id="show-hide-btn" class="control-btn">
                            <span class="button-emoji">üëÅÔ∏è</span>
                            <span class="button-text">HUNA/HO ªIKE</span>
                        </button>
                    <div class="level-selector">
                        <button id="level-down-btn" class="level-btn">
                            <span>-</span>
                        </button>
                        <button id="random-btn" class="control-btn">
                            <span class="button-emoji">üé≤</span>
                            <span class="button-text">KAULELE</span>
                            <span id="level-indicator">1</span>
                        </button>
                        <button id="level-up-btn" class="level-btn">
                            <span>+</span>
                        </button>
                    </div>
                    </div>
                </div>
                
                <!-- Number Input Pad -->
                <div class="input-section">
                    <div class="input-row">
                        <button class="digit-btn" data-digit="1" aria-label="helu 1">1</button>
                        <button class="digit-btn" data-digit="2">2</button>
                        <button class="digit-btn" data-digit="3">3</button>
                    </div>
                    <div class="input-row">
                        <button class="digit-btn" data-digit="4">4</button>
                        <button class="digit-btn" data-digit="5">5</button>
                        <button class="digit-btn" data-digit="6">6</button>
                    </div>
                    <div class="input-row">
                        <button class="digit-btn" data-digit="7">7</button>
                        <button class="digit-btn" data-digit="8">8</button>
                        <button class="digit-btn" data-digit="9">9</button>
                    </div>
                    <div class="input-row">
                        <button class="digit-btn" data-digit="0">0</button>
                        <button class="digit-btn" data-digit="00">00</button>
                        <button class="digit-btn" data-digit="000">000</button>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    const numberDisplay = document.getElementById('number-display');
    const arabicNumber = document.getElementById('arabic-number');
    const hawaiianNumber = document.getElementById('hawaiian-number');
    const clearBtn = document.getElementById('clear-btn');
    const backspaceBtn = document.getElementById('backspace-btn');
    const showHideBtn = document.getElementById('show-hide-btn');
    const randomBtn = document.getElementById('random-btn');
    const digitButtons = document.querySelectorAll('.digit-btn');
    
    // Add level button selectors inside DOMContentLoaded
    const levelUpBtn = document.getElementById('level-up-btn');
    const levelDownBtn = document.getElementById('level-down-btn');
    const levelIndicator = document.getElementById('level-indicator');
    
    let currentNumber = 0;
    let isHawaiianHidden = false;
    let currentLevel = 1;
    
    // Define levels for random number generation
    const levels = {
        1: { min: 1, max: 10, name: "1-10" },
        2: { min: 1, max: 100, name: "1-100" },
        3: { min: 100, max: 1000, name: "100-1,000" },
        4: { min: 1000, max: 10000, name: "1,000-10,000" },
        5: { min: 10000, max: 100000, name: "10,000-100,000" },
        6: { min: 100000, max: 1000001, name: "100,000-1,000,000" },
        7: { min: 1000000, max: 9999999, name: "1,000,000-9,999,999" }
    };
    
    // Update level indicator function
    function updateLevelIndicator() {
        levelIndicator.textContent = currentLevel;
    }
    
    // Update random button text
    function updateRandomButton() {
        randomBtn.innerHTML = `<span class="button-emoji">üé≤</span> <span class="button-text">KAULELE</span> <span id="level-indicator">${currentLevel}</span>`;
    }
    
    // Convert to Hawaiian numbers
    function toHawaiian(num) {
        // Base numbers
        const units = ['', 'kahi', 'lua', 'kolu', 'hƒÅ', 'lima', 'ono', 'hiku', 'walu', 'iwa'];
        const units_e = ['', ' ªekahi', ' ªelua', ' ªekolu', ' ªehƒÅ', ' ªelima', ' ªeono', ' ªehiku', ' ªewalu', ' ªeiwa'];
        
        // Special case: 0
        if (num === 0) return ' ªole';
        
        // Special case: 1,000,000 to 9,999,999
        if (num >= 1000000 && num < 10000000) {
            const millions = Math.floor(num / 1000000);
            const remainder = num % 1000000;
            
            let result = millions === 1 ? 'ho ªokahi miliona' : toHawaiian(millions) + ' miliona';
            
            if (remainder > 0) {
                result += ' ' + toHawaiian(remainder);
            }
            
            return result;
        }
        
        // Special case: 100,000 to 999,999
        if (num >= 100000 && num < 1000000) {
            const lau = Math.floor(num / 100000);
            const remainder = num % 100000;
            
            let result = lau === 1 ? 'ho ªokahi lau' : toHawaiian(lau) + ' lau';
            
            if (remainder > 0) {
                result += ' ' + toHawaiian(remainder);
            }
            
            return result;
        }
        
        // Special case: 10,000 to 99,999
        if (num >= 10000 && num < 100000) {
            const tenThousands = Math.floor(num / 10000);
            const remainder = num % 10000;
            
            let result = '';
            if (tenThousands === 1) {
                result = ' ªumi kaukani';
            } else if (tenThousands >= 2 && tenThousands <= 9) {
                result = units_e[tenThousands] + '  ªumi kaukani';
            } else {
                result = toHawaiian(tenThousands) + '  ªumi kaukani';
            }
            
            if (remainder > 0) {
                result += ' ' + toHawaiian(remainder);
            }
            
            return result;
        }
        
        // Special case: 1,000 to 9,999
        if (num >= 1000 && num < 10000) {
            const thousands = Math.floor(num / 1000);
            const remainder = num % 1000;
            
            let result = thousands === 1 ? 'ho ªokahi kaukani' : toHawaiian(thousands) + ' kaukani';
            
            if (remainder > 0) {
                result += ' ' + toHawaiian(remainder);
            }
            
            return result;
        }
        
        // Special case: 100 to 999
        if (num >= 100 && num < 1000) {
            const hundreds = Math.floor(num / 100);
            const remainder = num % 100;
            
            let result = hundreds === 1 ? 'ho ªokahi haneli' : toHawaiian(hundreds) + ' haneli';
            
            if (remainder > 0) {
                result += ' ' + toHawaiian(remainder);
            }
            
            return result;
        }
        
        // Special cases: 11-19
        if (num > 10 && num < 20) {
            return ' ªumik≈´mƒÅ' + units[num - 10];
        }
        
        // Special case: 20, 30, 40, etc.
        if (num >= 20 && num < 100) {
            const tens = Math.floor(num / 10);
            const remainder = num % 10;
            
            let tensName = '';
            if (tens === 2) {
                tensName = 'iwakƒÅlua';
            } else if (tens === 3) {
                tensName = 'kanakolu';
            } else if (tens === 4) {
                tensName = 'kanahƒÅ';
            } else if (tens === 5) {
                tensName = 'kanalima';
            } else if (tens === 6) {
                tensName = 'kanaono';
            } else if (tens === 7) {
                tensName = 'kanahiku';
            } else if (tens === 8) {
                tensName = 'kanawalu';
            } else if (tens === 9) {
                tensName = 'kanaiwa';
            }
            
            if (remainder === 0) {
                return tensName;
            } else {
                return tensName + 'k≈´mƒÅ' + units[remainder];
            }
        }
        
        // Special case: 10
        if (num === 10) return ' ªumi';
        
        // Numbers 1-9
        return units_e[num];
    }
    
    // Update the display
    function updateDisplay() {
        arabicNumber.textContent = currentNumber.toLocaleString();
        
        if (isHawaiianHidden) {
            hawaiianNumber.textContent = '‚Äî';
            showHideBtn.innerHTML = `<span class="button-emoji">üëÅÔ∏è</span><span class="button-text">HO ªIKE</span>`;
        } else {
            hawaiianNumber.textContent = toHawaiian(currentNumber);
            showHideBtn.innerHTML = `<span class="button-emoji">üëÅÔ∏è</span><span class="button-text">HUNA</span>`;
        }
    }
    
    // Add digit
    function addDigit(digit) {
        // Prevent numbers from getting too large
        if (currentNumber.toString().length < 7) {
            currentNumber = currentNumber * Math.pow(10, digit.length) + parseInt(digit);
            updateDisplay();
        }
    }
    
    // Random number generator
    function generateRandomNumber() {
        const level = levels[currentLevel];
        const randomNum = Math.floor(Math.random() * (level.max - level.min)) + level.min;
        currentNumber = randomNum;
        updateDisplay();
        
        // Update button text to show current level
        updateRandomButton();
    }
    
    // Create fullscreen display with responsive text sizing
    function createFullscreenDisplay() {
        // Create overlay element
        const overlay = document.createElement('div');
        
        // Track the fullscreen-specific visibility state
        let isWordHiddenInFullscreen = isHawaiianHidden;
        
        // Store the actual Hawaiian text regardless of visibility state
        const actualHawaiianText = toHawaiian(currentNumber);
        
        // Set styles for fullscreen overlay
        Object.assign(overlay.style, {
            position: 'fixed',
            top: '0',
            left: '0',
            width: '100%',
            height: '100%',
            backgroundColor: '#1E3057',
            color: 'white',
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            zIndex: '9999',
            textAlign: 'center',
            padding: '20px',
            transition: 'opacity 0.3s'
        });
        
        // Number display with improved responsive sizing
        const numElement = document.createElement('div');
        numElement.textContent = currentNumber.toLocaleString();
        Object.assign(numElement.style, {
            fontSize: 'clamp(32px, 15vw, 180px)', // Minimum 32px, preferred 15vw, maximum 180px
            fontFamily: 'Futura, sans-serif',
            marginBottom: '20px',
            lineHeight: '1.2',
            width: '90%'
        });
        
        // Hawaiian text display with improved responsive sizing
        const hawaiianElement = document.createElement('div');
        hawaiianElement.textContent = isWordHiddenInFullscreen ? '‚Äî' : actualHawaiianText;
        Object.assign(hawaiianElement.style, {
            fontSize: 'clamp(24px, 8vw, 100px)', // Minimum 24px, preferred 8vw, maximum 100px
            fontFamily: 'Futura, sans-serif',
            color: '#C79756',
            padding: '0 10px',
            width: '90%',
            maxWidth: '100%',
            wordWrap: 'break-word',
            minHeight: '120px',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            lineHeight: '1.3'
        });
        
        // Toggle button container
        const buttonContainer = document.createElement('div');
        buttonContainer.style.marginTop = '30px';
        buttonContainer.style.zIndex = '10000';
        
        // Toggle button for Hawaiian word visibility
        const toggleButton = document.createElement('button');
        toggleButton.textContent = isWordHiddenInFullscreen ? 'HO ªIKE' : 'HUNA';
        Object.assign(toggleButton.style, {
            padding: 'clamp(10px, 3vw, 18px) clamp(16px, 4vw, 36px)',
            fontSize: 'clamp(16px, 4vw, 24px)',
            backgroundColor: '#5480E8',
            color: 'white',
            border: 'none',
            borderRadius: '12px',
            cursor: 'pointer',
            fontWeight: 'bold',
            boxShadow: '0 6px 12px rgba(0,0,0,0.3)',
            transition: 'background-color 0.3s, transform 0.2s'
        });
        
        // Click instruction
        const instruction = document.createElement('div');
        instruction.textContent = '';
        Object.assign(instruction.style, {
            fontSize: 'clamp(12px, 3vw, 20px)',
            position: 'absolute',
            bottom: '30px',
            opacity: '0.7',
            width: '100%',
            textAlign: 'center'
        });
        
        buttonContainer.appendChild(toggleButton);
        
        overlay.appendChild(numElement);
        overlay.appendChild(hawaiianElement);
        overlay.appendChild(buttonContainer);
        overlay.appendChild(instruction);
        
        // Toggle button hover effects
        toggleButton.addEventListener('mouseover', () => {
            toggleButton.style.backgroundColor = '#3A67D1';
            toggleButton.style.transform = 'scale(1.05)';
        });
        
        toggleButton.addEventListener('mouseout', () => {
            toggleButton.style.backgroundColor = '#5480E8';
            toggleButton.style.transform = 'scale(1)';
        });
        
        // Toggle button click handler
        const toggleHandler = (e) => {
            e.stopPropagation();
            e.preventDefault();
            
            // Toggle the local fullscreen visibility state
            isWordHiddenInFullscreen = !isWordHiddenInFullscreen;
            
            // Update the Hawaiian text display based on the new state
            hawaiianElement.textContent = isWordHiddenInFullscreen ? '‚Äî' : actualHawaiianText;
            
            // Update the button text based on the new state
            toggleButton.textContent = isWordHiddenInFullscreen ? 'HO ªIKE' : 'HUNA';
            
            return false; // Ensure no propagation
        };
        
        toggleButton.addEventListener('click', toggleHandler);
        toggleButton.addEventListener('touchend', toggleHandler);
        
        // Add click event to close when clicking anywhere else on the overlay
        const closeHandler = (e) => {
            // Only close if clicking outside the button
            if (e.target !== toggleButton && !toggleButton.contains(e.target)) {
                document.body.removeChild(overlay);
                document.removeEventListener('keydown', escHandler);
            }
        };
        
        overlay.addEventListener('click', closeHandler);
        overlay.addEventListener('touchend', closeHandler);
        
        // Add escape key to close
        const escHandler = function(e) {
            if (e.key === 'Escape') {
                if (document.body.contains(overlay)) {
                    document.body.removeChild(overlay);
                }
                document.removeEventListener('keydown', escHandler);
            }
        };
        document.addEventListener('keydown', escHandler);
        
        // Check if we're on a very small screen and adjust layout
        if (window.innerWidth < 360 || window.innerHeight < 500) {
            // More compact layout for very small screens
            numElement.style.marginBottom = '10px';
            buttonContainer.style.marginTop = '15px';
            hawaiianElement.style.minHeight = '80px';
            instruction.style.bottom = '15px';
        }
        
        // Add custom media query directly on the elements using matchMedia
        const smallScreenHandler = window.matchMedia('(max-height: 600px)');
        function handleSmallScreen(e) {
            if (e.matches) {
                // Smaller spacing for short screens
                numElement.style.marginBottom = '10px';
                hawaiianElement.style.minHeight = '60px';
                buttonContainer.style.marginTop = '15px';
            }
        }
        
        // Run once at initialization
        handleSmallScreen(smallScreenHandler);
        // Add listener for screen size changes
        smallScreenHandler.addListener(handleSmallScreen);
        
        document.body.appendChild(overlay);
    }
    
    function showLoading() {
        const loader = document.createElement('div');
        loader.className = 'loader';
        loader.innerHTML = `
            <div class="spinner"></div>
            <div class="loading-text">E kali iki...</div>
        `;
        document.body.appendChild(loader);
    }
    
    // EVENT LISTENERS
    
    // Event listeners for digit buttons
    digitButtons.forEach(button => {
        button.addEventListener('click', function() {
            addDigit(this.getAttribute('data-digit'));
            
            // Add visual feedback
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = '';
            }, 100);
        });
    });
    
    // Clear button
    clearBtn.addEventListener('click', function() {
        currentNumber = 0;
        updateDisplay();
    });
    
    // Backspace button
    backspaceBtn.addEventListener('click', function() {
        currentNumber = Math.floor(currentNumber / 10);
        updateDisplay();
    });
    
    // Show/Hide button
    showHideBtn.addEventListener('click', function() {
        isHawaiianHidden = !isHawaiianHidden;
        updateDisplay();
    });
    
    // Level up button
    levelUpBtn.addEventListener('click', function() {
        if (currentLevel < 7) {
            currentLevel++;
            updateLevelIndicator();
            updateRandomButton();
        }
    });
    
    // Level down button
    levelDownBtn.addEventListener('click', function() {
        if (currentLevel > 1) {
            currentLevel--;
            updateLevelIndicator();
            updateRandomButton();
        }
    });
    
    // Random button click handler
    randomBtn.addEventListener('click', function() {
        generateRandomNumber();
    });
    
    // Fullscreen display
    numberDisplay.addEventListener('click', function() {
        createFullscreenDisplay();
    });
    
    // Keyboard support
    document.addEventListener('keydown', (e) => {
        if (e.key >= '0' && e.key <= '9') {
            addDigit(e.key);
        } else if (e.key === 'Backspace') {
            backspaceBtn.click();
        } else if (e.key === 'Delete') {
            clearBtn.click();
        } else if (e.key === 'ArrowUp') {
            levelUpBtn.click();
        } else if (e.key === 'ArrowDown') {
            levelDownBtn.click();
        } else if (e.key === 'Enter' || e.key === 'Return') {
            // Add support for Enter/Return key to activate the random button
            randomBtn.click();
        }
    });
    
    // INITIALIZATION
    
    // Initial setup
    updateLevelIndicator();
    updateRandomButton();
    updateDisplay();
    
    // Generate an initial random number
    generateRandomNumber();
    
    // Remove the level info text about shift+click since we don't need it anymore
    const levelInfo = document.querySelector('.level-info');
    if (levelInfo) {
        levelInfo.textContent = '';
    }
});
    </script>
</body>
</html>